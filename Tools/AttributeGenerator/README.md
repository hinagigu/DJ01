# DJ01 GAS ä»£ç ç”Ÿæˆå™¨ ä½¿ç”¨æ‰‹å†Œ

> **ç‰ˆæœ¬**: 2.0  
> **é€‚ç”¨é¡¹ç›®**: DJ01 (UE5 + GAS)  
> **åŠŸèƒ½**: é€šè¿‡å¯è§†åŒ–ç•Œé¢é…ç½®å±æ€§ã€GameplayTags å’Œ Executionï¼Œè‡ªåŠ¨ç”Ÿæˆ C++ ä»£ç   
> **æœ€åæ›´æ–°**: 2025-12-18

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [å±æ€§ç¼–è¾‘å™¨](#ä¸€-å±æ€§ç¼–è¾‘å™¨)
3. [GameplayTags ç¼–è¾‘å™¨](#äºŒ-gameplaytags-ç¼–è¾‘å™¨)
4. [Execution ç¼–è¾‘å™¨](#ä¸‰-execution-ç¼–è¾‘å™¨)
5. [å¿«æ·é”®](#å¿«æ·é”®)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## å¿«é€Ÿå¼€å§‹

### å¯åŠ¨æ–¹å¼

**æ–¹å¼ä¸€ï¼šPython è„šæœ¬**
```bash
cd d:\UnrealProjects\DJ01\Tools\AttributeGenerator
python main.py
```

**æ–¹å¼äºŒï¼šæ‰“åŒ…çš„ EXE**
```bash
# å·²æ‰“åŒ…çš„ exe åœ¨é¡¹ç›®æ ¹ç›®å½•
d:\UnrealProjects\DJ01\DJ01_GAS_Generator.exe

# æˆ–é‡æ–°æ‰“åŒ…
cd d:\UnrealProjects\DJ01\Tools\AttributeGenerator
build_exe.bat
# ç”Ÿæˆçš„ exe ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•
```

### ç•Œé¢æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š å±æ€§ç¼–è¾‘å™¨ â”‚ ğŸ“„ å±æ€§é¢„è§ˆ â”‚ âš¡ Execution â”‚ ğŸ“„ Execé¢„è§ˆ â”‚ ğŸ·ï¸ Tags â”‚ ğŸ“„ Tagsé¢„è§ˆ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸€ã€å±æ€§ç¼–è¾‘å™¨

### 1.1 æ¦‚å¿µè¯´æ˜

å±æ€§ç³»ç»Ÿé‡‡ç”¨**ä¸‰å±‚æ¶æ„**ï¼Œæ”¯æŒçµæ´»çš„æ•°å€¼è®¡ç®—ï¼š

| ç±»å‹ | ç”Ÿæˆçš„å±æ€§ | è®¡ç®—å…¬å¼ | é€‚ç”¨åœºæ™¯ |
|------|-----------|---------|---------|
| **Layered** | Base + Flat + Percent | `(Base + Flat) Ã— (1 + Percent)` | æ”»å‡»åŠ›ã€é˜²å¾¡åŠ›ç­‰æˆ˜æ–—å±æ€§ |
| **Simple** | å•ä¸€å€¼ | ç›´æ¥ä½¿ç”¨ | å½“å‰ç”Ÿå‘½å€¼ã€ç»éªŒå€¼ç­‰ |
| **Resource** | Max (Layered) + Current (Simple) | Max è®¡ç®—åä½œä¸ºä¸Šé™ | ç”Ÿå‘½å€¼ã€é­”æ³•å€¼ã€è€åŠ›ç­‰èµ„æº |
| **Meta** | ä¸´æ—¶å€¼ | ä»…ç”¨äº Execution è®¡ç®— | ä¼¤å®³ä¼ é€’ã€ä¸´æ—¶ä¿®æ­£ |

### 1.2 ç•Œé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å±æ€§é›†     â”‚  â”‚          å±æ€§åˆ—è¡¨               â”‚  â”‚   ç¼–è¾‘å±æ€§     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ StatSet (5)  â”‚  â”‚ Name     â”‚ Type    â”‚ Base â”‚ ... â”‚  â”‚ å±æ€§å: Attack â”‚
â”‚ CombatSet(3) â”‚  â”‚ Attack   â”‚ Layered â”‚ 100  â”‚     â”‚  â”‚ ç±»å‹: Layered  â”‚
â”‚              â”‚  â”‚ Defense  â”‚ Layered â”‚ 50   â”‚     â”‚  â”‚ åˆ†ç±»: Combat   â”‚
â”‚              â”‚  â”‚ Health   â”‚ Resourceâ”‚ 1000 â”‚     â”‚  â”‚ Base: 100      â”‚
â”‚              â”‚  â”‚          â”‚         â”‚      â”‚     â”‚  â”‚ Flat: 0        â”‚
â”‚              â”‚  â”‚          â”‚         â”‚      â”‚     â”‚  â”‚ Percent: 0     â”‚
â”‚ [+æ–°å»º][-åˆ é™¤]â”‚  â”‚                               â”‚  â”‚ æè¿°: æ”»å‡»åŠ›   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  [+ æ·»åŠ å±æ€§] [- åˆ é™¤å±æ€§]    [ä¿å­˜é…ç½®] [é‡æ–°åŠ è½½] [ç”Ÿæˆä»£ç ]
```

### 1.3 æ“ä½œæµç¨‹

#### åˆ›å»ºå±æ€§é›†
1. ç‚¹å‡»å·¦ä¾§ **[+ æ–°å»º]** æŒ‰é’®
2. è¾“å…¥å±æ€§é›†åç§°ï¼ˆå¦‚ `StatSet`ã€`CombatSet`ï¼‰
3. ç”Ÿæˆçš„ç±»åå°†æ˜¯ `UDJ01StatSet`ã€`UDJ01CombatSet`

#### æ·»åŠ å±æ€§
1. é€‰æ‹©å·¦ä¾§çš„å±æ€§é›†
2. ç‚¹å‡» **[+ æ·»åŠ å±æ€§]**
3. åœ¨å³ä¾§é¢æ¿ç¼–è¾‘å±æ€§ä¿¡æ¯ï¼š
   - **å±æ€§å**: å¦‚ `Attack`ï¼ˆä¸è¦åŠ å‰ç¼€ï¼‰
   - **ç±»å‹**: é€‰æ‹© Layered / Simple / Resource / Meta
   - **åˆ†ç±»**: ç”¨äºä»£ç æ³¨é‡Šåˆ†ç»„
   - **Base/Flat/Percent**: åˆå§‹å€¼ï¼ˆResource ç±»å‹è¿˜æœ‰ Currentï¼‰
4. ç‚¹å‡» **[ä¿å­˜ä¿®æ”¹]** æˆ–æŒ‰ `Ctrl+S`

#### å¿«é€Ÿç¼–è¾‘
- **åŒå‡»å•å…ƒæ ¼**: ç›´æ¥åœ¨è¡¨æ ¼ä¸­ç¼–è¾‘
- **F2**: é‡å‘½åå½“å‰é€‰ä¸­é¡¹
- **Delete**: åˆ é™¤å½“å‰é€‰ä¸­é¡¹

### 1.4 ç”Ÿæˆçš„ä»£ç 

ç‚¹å‡» **[ç”Ÿæˆä»£ç ]** åï¼Œç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| Header | `Source/DJ01/AbilitySystem/Attributes/Public/DJ01GeneratedAttributes.h` |
| Source | `Source/DJ01/AbilitySystem/Attributes/Private/DJ01GeneratedAttributes.cpp` |

**ç”Ÿæˆç¤ºä¾‹ï¼ˆLayered ç±»å‹ï¼‰**:
```cpp
// Attack å±æ€§
DECLARE_LAYERED_ATTRIBUTE(UDJ01StatSet, Attack)
// ç”Ÿæˆ: BaseAttack, FlatAttack, PercentAttack, Attack(è®¡ç®—å€¼)
```

**ç”Ÿæˆç¤ºä¾‹ï¼ˆResource ç±»å‹ï¼‰**:
```cpp
// Health èµ„æº
DECLARE_RESOURCE_ATTRIBUTE(UDJ01StatSet, Health)
// ç”Ÿæˆ: BaseMaxHealth, FlatMaxHealth, PercentMaxHealth, MaxHealth(è®¡ç®—å€¼), Health(å½“å‰å€¼)
```

### 1.5 ä½¿ç”¨ç”Ÿæˆçš„å±æ€§

```cpp
// åœ¨ GameplayEffect ä¸­ä¿®æ”¹å±æ€§
Modifiers:
  - Attribute: UDJ01StatSet.FlatAttack  // +50 æ”»å‡»åŠ›
    Operation: Add
    Magnitude: 50

// åœ¨ä»£ç ä¸­è¯»å–
float TotalAttack = AttributeSet->GetAttack();      // è·å–æœ€ç»ˆå€¼
float BaseAttack = AttributeSet->GetBaseAttack();   // è·å–åŸºç¡€å€¼
```

---

## äºŒã€GameplayTags ç¼–è¾‘å™¨

### 2.1 æ¦‚å¿µè¯´æ˜

GameplayTags æ˜¯ UE5 GAS çš„æ ¸å¿ƒæ ‡è¯†ç³»ç»Ÿï¼Œç”¨äºï¼š
- æ ‡è¯†æŠ€èƒ½ã€çŠ¶æ€ã€äº‹ä»¶
- æŠ€èƒ½æ¿€æ´»æ¡ä»¶åˆ¤æ–­
- ä¼¤å®³ç±»å‹åˆ†ç±»
- GameplayCue è§¦å‘

### 2.2 ç•Œé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ ‡ç­¾åˆ†ç±»   â”‚  â”‚            æ ‡ç­¾åˆ—è¡¨                 â”‚  â”‚   ç¼–è¾‘æ ‡ç­¾     â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ Ability (6)  â”‚  â”‚ Tag Path          â”‚ Variable       â”‚  â”‚ æ ‡ç­¾è·¯å¾„:      â”‚
â”‚ Status (14)  â”‚  â”‚ Ability.Attack    â”‚ Ability_Attack â”‚  â”‚ [Ability.Skill]â”‚
â”‚ Damage (10)  â”‚  â”‚ Ability.Dodge     â”‚ Ability_Dodge  â”‚  â”‚ å˜é‡å:        â”‚
â”‚ GameplayCue  â”‚  â”‚ Ability.Block     â”‚ Ability_Block  â”‚  â”‚ [Ability_Skill]â”‚
â”‚ ...          â”‚  â”‚                   â”‚                â”‚  â”‚ æè¿°:          â”‚
â”‚              â”‚  â”‚                   â”‚                â”‚  â”‚ [æŠ€èƒ½æ ‡ç­¾]     â”‚
â”‚ [+æ–°å»º][-åˆ é™¤]â”‚  â”‚                                   â”‚  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  [+ æ·»åŠ æ ‡ç­¾] [- åˆ é™¤æ ‡ç­¾]    [ä¿å­˜é…ç½®] [é‡æ–°åŠ è½½] [ç”Ÿæˆä»£ç ]
```

### 2.3 æ“ä½œæµç¨‹

#### æ·»åŠ æ ‡ç­¾
1. é€‰æ‹©æˆ–æ–°å»ºåˆ†ç±»
2. ç‚¹å‡» **[+ æ·»åŠ æ ‡ç­¾]**
3. ç¼–è¾‘æ ‡ç­¾ä¿¡æ¯ï¼š
   - **æ ‡ç­¾è·¯å¾„**: å¦‚ `Ability.Skill.Fireball`ï¼ˆç”¨ `.` åˆ†éš”å±‚çº§ï¼‰
   - **å˜é‡å**: è‡ªåŠ¨ç”Ÿæˆ `Ability_Skill_Fireball`ï¼ˆå¯æ‰‹åŠ¨ä¿®æ”¹ï¼‰
   - **æè¿°**: ç”¨äºä»£ç æ³¨é‡Š

#### å‘½åè§„èŒƒ
```
[é¡¶çº§åˆ†ç±»].[å­åˆ†ç±»].[å…·ä½“æ ‡ç­¾]

ç¤ºä¾‹ï¼š
- Ability.Attack.Light      // è½»æ”»å‡»æŠ€èƒ½
- Status.Condition.Stunned  // çœ©æ™•çŠ¶æ€
- Damage.Element.Fire       // ç«å…ƒç´ ä¼¤å®³
- GameplayCue.Hit.Physical  // ç‰©ç†å‘½ä¸­ç‰¹æ•ˆ
```

### 2.4 ç”Ÿæˆçš„ä»£ç 

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| Header | `Source/DJ01/System/Public/DJ01GameplayTags.h` |
| Source | `Source/DJ01/System/Private/DJ01GameplayTags.cpp` |

**ç”Ÿæˆç¤ºä¾‹**:
```cpp
// Header
namespace DJ01GameplayTags
{
    DJ01_API UE_DECLARE_GAMEPLAY_TAG_EXTERN(Ability_Attack_Light);
}

// Source
namespace DJ01GameplayTags
{
    UE_DEFINE_GAMEPLAY_TAG_COMMENT(Ability_Attack_Light, "Ability.Attack.Light", "Light attack ability.");
}
```

### 2.5 ä½¿ç”¨ç”Ÿæˆçš„æ ‡ç­¾

```cpp
#include "DJ01GameplayTags.h"

// æ£€æŸ¥æ ‡ç­¾
if (AbilityTags.HasTag(DJ01GameplayTags::Ability_Attack_Light))
{
    // æ‰§è¡Œè½»æ”»å‡»é€»è¾‘
}

// æ·»åŠ æ ‡ç­¾
ASC->AddLooseGameplayTag(DJ01GameplayTags::Status_Condition_Stunned);
```

---

## ä¸‰ã€Execution ç¼–è¾‘å™¨

### 3.1 æ¦‚å¿µè¯´æ˜

Executionï¼ˆ`UGameplayEffectExecutionCalculation`ï¼‰ç”¨äºå¤æ‚çš„æ•°å€¼è®¡ç®—ï¼Œå¦‚ï¼š
- ä¼¤å®³è®¡ç®—ï¼ˆè€ƒè™‘æ”»å‡»ã€é˜²å¾¡ã€æš´å‡»ã€å…ƒç´ å…‹åˆ¶ï¼‰
- æ²»ç–—è®¡ç®—
- å±æ€§è½¬æ¢

### 3.2 ç•Œé¢ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Execution   â”‚  â”‚           æ•è·å±æ€§                  â”‚  â”‚  ç¼–è¾‘ Executionâ”‚
â”‚   åˆ—è¡¨       â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ Source â”‚ Attribute    â”‚ Layer      â”‚  â”‚ åç§°:          â”‚
â”‚ DamageExec   â”‚  â”‚ Source â”‚ Attack       â”‚ Total      â”‚  â”‚ [DamageExec]   â”‚
â”‚ HealExec     â”‚  â”‚ Target â”‚ Defense      â”‚ Total      â”‚  â”‚                â”‚
â”‚              â”‚  â”‚ Target â”‚ Health       â”‚ Value      â”‚  â”‚ æè¿°:          â”‚
â”‚              â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ [ä¼¤å®³è®¡ç®—å…¬å¼] â”‚
â”‚              â”‚  â”‚           è¾“å‡ºä¿®æ”¹                  â”‚  â”‚                â”‚
â”‚              â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚                â”‚
â”‚              â”‚  â”‚ Attribute    â”‚ Op      â”‚ Magnitude â”‚  â”‚                â”‚
â”‚              â”‚  â”‚ Health       â”‚ Add     â”‚ -Damage   â”‚  â”‚                â”‚
â”‚ [+æ–°å»º][-åˆ é™¤]â”‚  â”‚                                   â”‚  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  [+ æ·»åŠ æ•è·] [+ æ·»åŠ è¾“å‡º]   [ä¿å­˜é…ç½®] [é‡æ–°åŠ è½½] [ç”Ÿæˆä»£ç ]
```

### 3.3 æ ¸å¿ƒæ¦‚å¿µ

#### æ•è·å±æ€§ï¼ˆCaptureï¼‰
ä»æ¥æºæˆ–ç›®æ ‡èº«ä¸Šè·å–å±æ€§å€¼ç”¨äºè®¡ç®—ï¼š

| å­—æ®µ | è¯´æ˜ | å¯é€‰å€¼ |
|------|------|--------|
| Source | å±æ€§æ¥æº | `Source`ï¼ˆæ–½æ³•è€…ï¼‰/ `Target`ï¼ˆç›®æ ‡ï¼‰ |
| Attribute | å±æ€§å | ä»å±æ€§ç¼–è¾‘å™¨ä¸­é€‰æ‹© |
| Layer | æ•è·çš„å±‚ | `Base` / `Flat` / `Percent` / `Total` / `Value` |

#### Tag æ¡ä»¶ï¼ˆTag Conditionsï¼‰â­ æ–°åŠŸèƒ½
æ ¹æ® Source æˆ– Target èº«ä¸Šçš„ GameplayTag ä¿®æ”¹è®¡ç®—ç»“æœï¼š

| å­—æ®µ | è¯´æ˜ | å¯é€‰å€¼ |
|------|------|--------|
| æ£€æŸ¥å¯¹è±¡ | æ£€æŸ¥è°çš„ Tag | `Source`ï¼ˆæ–½æ³•è€…ï¼‰/ `Target`ï¼ˆç›®æ ‡ï¼‰ |
| Tag | è¦æ£€æŸ¥çš„æ ‡ç­¾ | ä» Tags ç¼–è¾‘å™¨ä¸­é€‰æ‹© |
| æ•ˆæœ | è§¦å‘çš„æ•ˆæœ | `Skip` / `Multiply` / `Add` |
| æ•°å€¼ | æ•ˆæœå‚æ•° | Skip ä¸éœ€è¦ï¼ŒMultiply/Add éœ€è¦ |

**æ•ˆæœç±»å‹è¯´æ˜**ï¼š

| æ•ˆæœ | è¯´æ˜ | åº”ç”¨åœºæ™¯ |
|------|------|---------|
| **Skip** | ç›´æ¥è·³è¿‡è®¡ç®—ï¼Œè¿”å› 0 | å…ç–«æŸå…ƒç´ ä¼¤å®³ |
| **Multiply** | æœ€ç»ˆå€¼ä¹˜ä»¥å€ç‡ | å¼±ç‚¹åŠ æˆï¼ˆ1.5xï¼‰ã€æŠ—æ€§å‡å…ï¼ˆ0.5xï¼‰ã€æš´å‡»ï¼ˆ2.0xï¼‰ |
| **Add** | æœ€ç»ˆå€¼å¢åŠ å›ºå®šå€¼ | å›ºå®šä¼¤å®³åŠ æˆã€æŠ¤ç›¾å¸æ”¶ |

#### è¾“å‡ºä¿®æ”¹ï¼ˆOutputï¼‰
å°†è®¡ç®—ç»“æœåº”ç”¨åˆ°ç›®æ ‡å±æ€§ï¼š

| å­—æ®µ | è¯´æ˜ | å¯é€‰å€¼ |
|------|------|--------|
| Attribute | ç›®æ ‡å±æ€§ | ä»å±æ€§ç¼–è¾‘å™¨ä¸­é€‰æ‹© |
| Operation | æ“ä½œç±»å‹ | `Additive`ï¼ˆåŠ ï¼‰/ `Multiply`ï¼ˆä¹˜ï¼‰/ `Override`ï¼ˆè¦†ç›–ï¼‰ |
| Magnitude | æ•°å€¼å˜é‡å | åœ¨ Execute å‡½æ•°ä¸­ä½¿ç”¨ |

### 3.4 æ“ä½œæµç¨‹

#### åˆ›å»ºä¼¤å®³å…¬å¼ï¼ˆå«å…ƒç´ å…ç–«/å¼±ç‚¹ï¼‰
1. ç‚¹å‡» **[+ æ–°å»º]**ï¼Œè¾“å…¥åç§° `FireDamage`
2. æ·»åŠ æ•è·å±æ€§ï¼š
   - Source â†’ Attack â†’ Totalï¼ˆæ”»å‡»è€…çš„æ”»å‡»åŠ›ï¼‰
   - Target â†’ Defense â†’ Totalï¼ˆç›®æ ‡çš„é˜²å¾¡åŠ›ï¼‰
3. **æ·»åŠ  Tag æ¡ä»¶**ï¼š
   - Target â†’ `Immunity.Element.Fire` â†’ Skipï¼ˆç«ç„°å…ç–«ï¼‰
   - Target â†’ `Weakness.Element.Fire` â†’ Multiply â†’ 1.5ï¼ˆç«ç„°å¼±ç‚¹ +50%ï¼‰
   - Target â†’ `Resistance.Element.Fire` â†’ Multiply â†’ 0.5ï¼ˆç«ç„°æŠ—æ€§ -50%ï¼‰
4. æ·»åŠ è¾“å‡ºï¼š
   - Health â†’ Additiveï¼ˆæ‰£å‡ç”Ÿå‘½å€¼ï¼‰
5. ç¼–å†™è®¡ç®—é€»è¾‘ï¼š
   ```cpp
   float FinalValue = FMath::Max(0.f, AttackValue - DefenseValue);
   ```
6. ç‚¹å‡» **[ç”Ÿæˆä»£ç ]**

### 3.5 ç”Ÿæˆçš„ä»£ç 

| æ–‡ä»¶ | è·¯å¾„ |
|------|------|
| Header | `Source/DJ01/AbilitySystem/Executions/Generated/DJ01Exec_DamageExec.h` |
| Source | `Source/DJ01/AbilitySystem/Executions/Generated/DJ01Exec_DamageExec.cpp` |

**ç”Ÿæˆç¤ºä¾‹ï¼ˆå« Tag æ¡ä»¶ï¼‰**:
```cpp
void UDJ01FireDamageExecution::Execute_Implementation(...) const
{
    // ... åˆå§‹åŒ–ä»£ç  ...
    
    // ========== Tag æ¡ä»¶æ£€æŸ¥ ==========
    float TagMultiplier = 1.f;
    float TagAdditive = 0.f;

    // Target æœ‰ Immunity.Element.Fire æ ‡ç­¾æ—¶è·³è¿‡
    if (EvalParams.TargetTags && EvalParams.TargetTags->HasTag(DJ01GameplayTags::Immunity_Element_Fire))
    {
        return; // å…ç–«ç«ç„°ä¼¤å®³
    }

    // Target æœ‰ Weakness.Element.Fire æ ‡ç­¾æ—¶ä¹˜ä»¥ 1.5
    if (EvalParams.TargetTags && EvalParams.TargetTags->HasTag(DJ01GameplayTags::Weakness_Element_Fire))
    {
        TagMultiplier *= 1.5f; // å¼±ç‚¹ +50%
    }

    // Target æœ‰ Resistance.Element.Fire æ ‡ç­¾æ—¶ä¹˜ä»¥ 0.5
    if (EvalParams.TargetTags && EvalParams.TargetTags->HasTag(DJ01GameplayTags::Resistance_Element_Fire))
    {
        TagMultiplier *= 0.5f; // æŠ—æ€§ -50%
    }

    // ========== è·å–å±æ€§å€¼ ==========
    float AttackValue = 0.f;
    float DefenseValue = 0.f;
    // ... è·å–å±æ€§ä»£ç  ...

    // ========== è®¡ç®—é€»è¾‘ ==========
    float FinalValue = FMath::Max(0.f, AttackValue - DefenseValue);

    // åº”ç”¨ Tag æ¡ä»¶ä¿®æ­£
    FinalValue = (FinalValue + TagAdditive) * TagMultiplier;

    // ========== è¾“å‡ºç»“æœ ==========
    if (FinalValue != 0.f)
    {
        OutExecutionOutput.AddOutputModifier(FGameplayModifierEvaluatedData(
            UDJ01StatSet::GetHealthAttribute(), EGameplayModOp::Additive, -FinalValue));
    }
}
```

### 3.6 ä½¿ç”¨ç”Ÿæˆçš„ Execution

åœ¨ GameplayEffect è“å›¾ä¸­ï¼š
1. æ·»åŠ  `Executions` æ•°ç»„å…ƒç´ 
2. é€‰æ‹© `DJ01Exec_DamageExec`
3. åº”ç”¨ GE æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨è®¡ç®—

---

## å¿«æ·é”®

| å¿«æ·é”® | åŠŸèƒ½ | é€‚ç”¨èŒƒå›´ |
|--------|------|---------|
| `Ctrl+S` | ä¿å­˜å½“å‰ç¼–è¾‘å¹¶ä¿å­˜é…ç½® | å…¨å±€ |
| `F2` | é‡å‘½åé€‰ä¸­é¡¹ | åˆ—è¡¨ã€æ ‘å½¢æ§ä»¶ |
| `Delete` | åˆ é™¤é€‰ä¸­é¡¹ | åˆ—è¡¨ã€æ ‘å½¢æ§ä»¶ |
| `åŒå‡»` | å†…è”ç¼–è¾‘å•å…ƒæ ¼ | æ ‘å½¢è¡¨æ ¼ |

---

## å¸¸è§é—®é¢˜

### Q: ç”Ÿæˆä»£ç åéœ€è¦åšä»€ä¹ˆï¼Ÿ
A: 
1. åœ¨ Rider/VS ä¸­åˆ·æ–°é¡¹ç›®ï¼ˆæˆ–é‡æ–°ç”Ÿæˆé¡¹ç›®æ–‡ä»¶ï¼‰
2. é‡æ–°ç¼–è¯‘é¡¹ç›®
3. æ–°çš„å±æ€§/æ ‡ç­¾/Execution å³å¯åœ¨è“å›¾ä¸­ä½¿ç”¨

### Q: ä¿®æ”¹å±æ€§åå¦‚ä½•æ›´æ–°ï¼Ÿ
A: 
1. åœ¨ç”Ÿæˆå™¨ä¸­ä¿®æ”¹é…ç½®
2. ç‚¹å‡» **[ç”Ÿæˆä»£ç ]** è¦†ç›–ç”Ÿæˆ
3. é‡æ–°ç¼–è¯‘

### Q: Execution çš„è®¡ç®—é€»è¾‘åœ¨å“ªå†™ï¼Ÿ
A: ç”Ÿæˆå™¨åªç”Ÿæˆæ¡†æ¶ä»£ç ï¼Œè®¡ç®—é€»è¾‘éœ€è¦åœ¨ç”Ÿæˆçš„ `.cpp` æ–‡ä»¶çš„ `Execute_Implementation` å‡½æ•°ä¸­æ‰‹åŠ¨ç¼–å†™ã€‚

### Q: Tag æ¡ä»¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„å—ï¼Ÿ
A: æ˜¯çš„ï¼åœ¨ Execution ç¼–è¾‘å™¨ä¸­é…ç½®çš„ Tag æ¡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„ C++ ä»£ç ï¼ŒåŒ…æ‹¬ï¼š
- å…ç–«æ£€æŸ¥ï¼ˆSkipï¼‰
- å€ç‡ä¿®æ­£ï¼ˆMultiplyï¼‰
- å›ºå®šåŠ æˆï¼ˆAddï¼‰

ä½ åªéœ€è¦åœ¨ Tags ç¼–è¾‘å™¨ä¸­å…ˆå®šä¹‰å¥½ç›¸å…³çš„ Tagï¼ˆå¦‚ `Immunity.Element.Fire`ï¼‰ï¼Œç„¶ååœ¨ Execution ä¸­é€‰æ‹©å³å¯ã€‚

### Q: é…ç½®æ–‡ä»¶åœ¨å“ªï¼Ÿ
A:
| æ¨¡å— | é…ç½®æ–‡ä»¶ |
|------|---------|
| å±æ€§ | `Source/DJ01/AbilitySystem/Attributes/Config/AttributeDefinitions.csv` |
| Tags | `Source/DJ01/System/Config/GameplayTagDefinitions.json` |
| Execution | `Source/DJ01/AbilitySystem/Executions/Config/ExecutionDefinitions.json` |

---

## æ–‡ä»¶ç»“æ„

```
Tools/AttributeGenerator/
â”œâ”€â”€ main.py                 # ä¸»å…¥å£
â”œâ”€â”€ config.py               # é…ç½®å¸¸é‡ï¼ˆè·¯å¾„å®šä¹‰ï¼‰
â”‚
â”œâ”€â”€ attribute_module.py     # å±æ€§ç¼–è¾‘å™¨æ¨¡å—
â”œâ”€â”€ tag_module.py           # Tags ç¼–è¾‘å™¨æ¨¡å—
â”‚
â”œâ”€â”€ execution_module.py     # Execution ç¼–è¾‘å™¨å…¥å£ï¼ˆç»Ÿä¸€å¯¼å‡ºï¼‰
â”œâ”€â”€ execution_data.py       # Execution æ•°æ®æ¨¡å‹
â”œâ”€â”€ execution_generator.py  # Execution C++ ä»£ç ç”Ÿæˆå™¨
â”œâ”€â”€ execution_ui.py         # Execution ç¼–è¾‘å™¨ UI
â”‚
â”œâ”€â”€ ui_base/                # ğŸ†• å¯å¤ç”¨ UI ç»„ä»¶åº“
â”‚   â”œâ”€â”€ __init__.py         # æ¨¡å—å¯¼å‡º
â”‚   â”œâ”€â”€ base_editor.py      # ç¼–è¾‘å™¨åŸºç±»ï¼ˆå¿«æ·é”®ã€é€šç”¨è¡Œä¸ºï¼‰
â”‚   â”œâ”€â”€ widgets.py          # å¯å¤ç”¨ç»„ä»¶ï¼ˆGroupListWidget, ItemTreeWidget, BottomButtonBarï¼‰
â”‚   â”œâ”€â”€ helpers.py          # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ inline_editor.py    # è¡Œå†…ç¼–è¾‘å™¨ Mixin
â”‚
â”œâ”€â”€ build_exe.bat           # æ‰“åŒ…è„šæœ¬
â””â”€â”€ README.md               # æœ¬è¯´æ˜ä¹¦
```

### æ¨¡å—æ¶æ„

```mermaid
graph TB
    subgraph main.py
        App[GASGeneratorApp]
    end
    
    subgraph ui_base[ğŸ†• UI åŸºç¡€ç»„ä»¶åº“]
        BE[base_editor.py<br/>BaseEditorUI åŸºç±»]
        WG[widgets.py<br/>GroupListWidget<br/>ItemTreeWidget<br/>BottomButtonBar]
        IE[inline_editor.py<br/>InlineEditorMixin]
    end
    
    subgraph å±æ€§æ¨¡å—
        AM[attribute_module.py<br/>AttributeEditorUI]
    end
    
    subgraph Tagsæ¨¡å—
        TM[tag_module.py<br/>TagEditorUI]
    end
    
    subgraph Executionæ¨¡å—
        EM[execution_module.py<br/>ç»Ÿä¸€å…¥å£]
        ED[execution_data.py<br/>æ•°æ®æ¨¡å‹]
        EG[execution_generator.py<br/>ä»£ç ç”Ÿæˆ]
        EU[execution_ui.py<br/>ExecutionEditorUI]
        
        EM --> ED
        EM --> EG
        EM --> EU
    end
    
    App --> AM
    App --> TM
    App --> EM
    
    AM --> BE
    AM --> WG
    TM --> BE
    TM --> WG
    EU --> BE
    EU --> WG
    EU --> IE
```

### UI ç»„ä»¶è¯´æ˜

| ç»„ä»¶ | è¯´æ˜ | ä½¿ç”¨åœºæ™¯ |
|------|------|---------|
| **BaseEditorUI** | ç¼–è¾‘å™¨åŸºç±»ï¼Œæä¾› F2/Delete/Escape å¿«æ·é”®å¤„ç† | æ‰€æœ‰ç¼–è¾‘å™¨ç»§æ‰¿ |
| **GroupListWidget** | å·¦ä¾§åˆ†ç»„åˆ—è¡¨ç»„ä»¶ï¼Œæ”¯æŒæ–°å»º/åˆ é™¤/é€‰æ‹© | å±æ€§é›†ã€æ ‡ç­¾åˆ†ç±»ã€Execution åˆ—è¡¨ |
| **ItemTreeWidget** | ä¸­é—´è¡¨æ ¼ç»„ä»¶ï¼ŒåŸºäº Treeview | å±æ€§åˆ—è¡¨ã€æ ‡ç­¾åˆ—è¡¨ |
| **BottomButtonBar** | åº•éƒ¨æŒ‰é’®æ ç»„ä»¶ | ä¿å­˜/ç”Ÿæˆä»£ç ç­‰æŒ‰é’® |
| **InlineEditorMixin** | è¡Œå†…ç¼–è¾‘å™¨ Mixinï¼Œæä¾›ä¸‹æ‹‰æ¡†/è¾“å…¥æ¡†ç¼–è¾‘ | Execution æ•è·/è¾“å‡º/Tag æ¡ä»¶ç¼–è¾‘ |

---

## å·¥ä½œæµç¤ºä¾‹

### åˆ›å»ºç«ç„°ä¼¤å®³ç³»ç»Ÿ

```mermaid
flowchart LR
    A[1. å®šä¹‰å±æ€§] --> B[2. å®šä¹‰ Tags]
    B --> C[3. åˆ›å»º Execution]
    C --> D[4. ç”Ÿæˆä»£ç ]
    D --> E[5. ç¼–è¯‘ä½¿ç”¨]
    
    subgraph å±æ€§ç¼–è¾‘å™¨
        A1[Attack - Layered]
        A2[Defense - Layered]
        A3[Health - Resource]
    end
    
    subgraph Tags ç¼–è¾‘å™¨
        B1[Immunity.Element.Fire]
        B2[Weakness.Element.Fire]
        B3[Damage.Element.Fire]
    end
    
    subgraph Execution ç¼–è¾‘å™¨
        C1[æ•è·: Attack, Defense]
        C2[Tagæ¡ä»¶: å…ç–«/å¼±ç‚¹]
        C3[è¾“å‡º: Health]
    end
```

**æ­¥éª¤è¯¦è§£**ï¼š

1. **å±æ€§ç¼–è¾‘å™¨**ï¼šåˆ›å»º Attackã€Defenseï¼ˆLayeredï¼‰ï¼ŒHealthï¼ˆResourceï¼‰
2. **Tags ç¼–è¾‘å™¨**ï¼šåˆ›å»º `Immunity.Element.Fire`ã€`Weakness.Element.Fire`
3. **Execution ç¼–è¾‘å™¨**ï¼š
   - æ•è· Source.Attack å’Œ Target.Defense
   - æ·»åŠ  Tag æ¡ä»¶ï¼šç«ç„°å…ç–« â†’ Skipï¼Œç«ç„°å¼±ç‚¹ â†’ Multiply 1.5
   - è¾“å‡ºåˆ° Target.Health
4. **ç”Ÿæˆä»£ç **ï¼šç‚¹å‡»å„ç¼–è¾‘å™¨çš„ [ç”Ÿæˆä»£ç ] æŒ‰é’®
5. **ç¼–è¯‘ä½¿ç”¨**ï¼šåœ¨ UE5 ä¸­åˆ›å»º GameplayEffectï¼Œä½¿ç”¨ç”Ÿæˆçš„ Execution

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|---------|
| 2.0 | 2025-12-18 | ğŸ‰ UI æ¶æ„é‡æ„ï¼šå¼•å…¥ ui_base ç»„ä»¶åº“ï¼Œæ‰€æœ‰ç¼–è¾‘å™¨ç»§æ‰¿ BaseEditorUI |
| 1.1 | 2025-01 | æ·»åŠ  Tag æ¡ä»¶åŠŸèƒ½ï¼ŒExecution ç¼–è¾‘å™¨æ¨¡å—æ‹†åˆ† |
| 1.0 | 2024-12 | åˆå§‹ç‰ˆæœ¬ï¼šå±æ€§ã€Tagsã€Execution ä¸‰å¤§ç¼–è¾‘å™¨ |

---

*æœ€åæ›´æ–°: 2025-12-18*