# ServerMaster - åˆ†å¸ƒå¼å¤šDSæ¶æ„æ–‡æ¡£

## é¡¹ç›®ç›®æ ‡

æ„å»ºä¸€ä¸ª**ä¼ä¸šçº§åˆ†å¸ƒå¼MMOæœåŠ¡å™¨æ¶æ„Demo**ï¼Œå‚è€ƒé€†æ°´å¯’æ‰‹æ¸¸æ¶æ„ï¼š

| èƒ½åŠ› | è¯´æ˜ |
|------|------|
| ğŸŒ **åœºæ™¯åˆ†å‰²** | å¤§ä¸–ç•Œåˆ‡å‰²åˆ°å¤šä¸ªDSèŠ‚ç‚¹ |
| ğŸ”„ **è·¨DSåŒæ­¥** | Ghostå®ä½“è¾¹ç•ŒåŒæ­¥ |
| ğŸ“¡ **æ¶ˆæ¯è·¯ç”±** | Switcherç‹¬ç«‹è¿›ç¨‹ä¸­è½¬ |
| ğŸš€ **æ— ç¼ä¼ é€** | ç©å®¶è·¨DSè¿ç§» |

---

## æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| æ¸¸æˆé€»è¾‘ | **UE5 C++** | DSèŠ‚ç‚¹ã€GASæˆ˜æ–— |
| ç‹¬ç«‹è¿›ç¨‹ | **Go** | Masterã€Switcherã€Gateway |
| é€šä¿¡ | **TCP + Protobuf** | ä½å»¶è¿Ÿã€å¼ºç±»å‹ |
| å­˜å‚¨ | **Redis + MySQL** | ç¼“å­˜ + æŒä¹…åŒ– |

---

## æ–‡æ¡£ç´¢å¼•ä¸è¿›åº¦è¿½è¸ª

> ğŸ’¡ **è¿›åº¦è¯´æ˜**: â¬œæœªå¼€å§‹ | ğŸ“–é˜…è¯»ä¸­ | âœ…å·²ç†è§£ | ğŸ”¨å®ç°ä¸­ | âœ”ï¸å®Œæˆ

| # | æ–‡æ¡£ | å†…å®¹ | é˜…è¯» | Goå®ç° | UE5å®ç° | å¤‡æ³¨ |
|---|------|------|:----:|:------:|:-------:|------|
| 00 | [æ¶æ„æ€»è§ˆ](./00_ArchitectureOverview.md) | æ¶æ„ã€æŠ€æœ¯æ ˆã€é˜¶æ®µ | â¬œ | - | - | |
| 01 | [ServiceAddress](./01_ServiceAddress.md) | 32ä½åœ°å€ç¼–ç  | â¬œ | â¬œ | â¬œ | P0 |
| 02 | [Switcher](./02_SwitcherDesign.md) | æ¶ˆæ¯è·¯ç”±è®¾è®¡ | â¬œ | â¬œ | â¬œ | P0 |
| 03 | [Master](./03_Master.md) | æœåŠ¡å‘ç°/è´Ÿè½½å‡è¡¡ | â¬œ | â¬œ | - | P0 |
| 04 | [Gateway](./04_Gateway.md) | å®¢æˆ·ç«¯æ¥å…¥ | â¬œ | â¬œ | â¬œ | P1 |
| 05 | [æ¶ˆæ¯åè®®](./05_MessageProtocol.md) | Protobufå®šä¹‰ | â¬œ | â¬œ | â¬œ | P0 |
| 06 | [åœºæ™¯åˆ†å‰²](./06_SceneSegmentation.md) | Zoneåˆ’åˆ† | â¬œ | - | â¬œ | P1 |
| 07 | [Ghostå®ä½“](./07_GhostEntity.md) | è·¨DSåŒæ­¥ | â¬œ | - | â¬œ | P1 |
| 08 | [æƒå¨è½¬ç§»](./08_AuthorityTransfer.md) | è·¨DSè¿ç§» | â¬œ | â¬œ | â¬œ | P1 |
| 09 | [DSé›†æˆ](./09_DS_Integration.md) | UE5é›†æˆ | â¬œ | - | â¬œ | P1 |
| 10 | [æµ‹è¯•è®¡åˆ’](./10_TestPlan.md) | æµ‹è¯•ä¸æ¼”ç¤º | â¬œ | - | - | P2 |
| 11 | [å®¢æˆ·ç«¯è¿æ¥](./11_ClientConnection.md) | ç™»å½•æµç¨‹ | â¬œ | â¬œ | â¬œ | P1 |

### å®ç°è¿›åº¦æ±‡æ€»

```
Phase 1 - é€šä¿¡åŸºç¡€: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
Phase 2 - æœåŠ¡åè°ƒ: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
Phase 3 - åœºæ™¯åˆ†å‰²: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
Phase 4 - æƒå¨è½¬ç§»: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
Phase 5 - Demoé›†æˆ: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%
```

### TODO List

- [ ] åˆ›å»º `ServerGo/` é¡¹ç›®ç»“æ„
- [ ] å®ç° ServiceAddress (Go)
- [ ] å®ç° ServiceAddress (UE5)
- [ ] åˆ›å»º Proto æ–‡ä»¶
- [ ] ...

---

## ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    subgraph å®¢æˆ·ç«¯
        C[UE5 Client]
    end
    
    subgraph GoæœåŠ¡
        GW[Gateway]
        SW[Switcher]
        Master[Master]
    end
    
    subgraph UE5 DS
        DS1[DS Zone(0,0)]
        DS2[DS Zone(1,0)]
        DS3[DS Zone(0,1)]
        DS4[DS Zone(1,1)]
    end
    
    C --> GW
    GW --> SW
    SW <--> Master
    SW <--> DS1
    SW <--> DS2
    SW <--> DS3
    SW <--> DS4
    
    DS1 <-.Ghost.-> DS2
    DS1 <-.Ghost.-> DS3
    DS2 <-.Ghost.-> DS4
    DS3 <-.Ghost.-> DS4
```

---

## å¼€å‘é˜¶æ®µ

| Phase | ç›®æ ‡ | å…³é”®æ¨¡å— | æ–‡æ¡£å‚è€ƒ |
|-------|------|---------|---------|
| **1** | é€šä¿¡åŸºç¡€ | ServiceAddress, Switcher | 01, 02, 05 |
| **2** | æœåŠ¡åè°ƒ | Master, DSæ³¨å†Œ | 03, 09 |
| **3** | åœºæ™¯åˆ†å‰² | Zone, Ghost | 06, 07 |
| **4** | æƒå¨è½¬ç§» | Transfer | 08 |
| **5** | Demoé›†æˆ | æµ‹è¯•åœºæ™¯ | 10 |

---

## å¿«é€Ÿå¼€å§‹

### 1. åˆ›å»ºGoé¡¹ç›®

```bash
mkdir ServerGo && cd ServerGo
go mod init github.com/yourname/dj01-server
```

### 2. åˆ›å»ºProtoç›®å½•

```bash
mkdir Proto
# æ ¹æ®05_MessageProtocol.mdåˆ›å»º.protoæ–‡ä»¶
```

### 3. æŒ‰Phaseé¡ºåºå®ç°

å‚è€ƒå„æ–‡æ¡£çš„"å¾…å®ç°"ç« èŠ‚ï¼ŒæŒ‰ä¼˜å…ˆçº§é€æ­¥å®Œæˆã€‚

---

## ä»£ç ç›®å½•

```
DJ01/
â”œâ”€â”€ Source/DJ01/Network/      # UE5 C++
â”‚   â”œâ”€â”€ Distributed/          # SwitcherClient, ServiceAddress
â”‚   â”œâ”€â”€ Ghost/                # GhostManager, GhostActor
â”‚   â””â”€â”€ ScenePartition/       # ZoneManager, Boundary
â”‚
â”œâ”€â”€ ServerGo/                 # GoæœåŠ¡
â”‚   â”œâ”€â”€ cmd/{master,switcher,gateway}/
â”‚   â”œâ”€â”€ internal/{protocol,service,registry}/
â”‚   â””â”€â”€ pkg/address/
â”‚
â””â”€â”€ Proto/                    # Protobuf
    â””â”€â”€ *.proto
```

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

ğŸ¯ **å¼€å§‹Phase 1å®ç°**ï¼š
1. åˆ›å»º`ServerGo`é¡¹ç›®ç»“æ„
2. å®ç°`ServiceAddress` (Go + UE5)
3. å®ç°Switcheréª¨æ¶
4. å®ç°æ¶ˆæ¯åè®®

çº²è¦æ–‡æ¡£å·²å…¨éƒ¨å®Œæˆï¼Œå¯ä»¥æ ¹æ®æ–‡æ¡£é€æ­¥å®ç°ä»£ç ï¼