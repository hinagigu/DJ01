// Auto-generated by DJ01 BindingSet Generator
// Generated at: 2025-12-28 15:53:12
// BindingSet: Test
// Description: Test 绑定集
//
// Tag Bindings: 5
// Attribute Bindings: 2
//
// DO NOT MODIFY THIS FILE MANUALLY!

#pragma once

#include "AbilitySystemComponent.h"
#include "DJ01/AbilitySystem/Attributes/Public/ResourceSet.h"
#include "DJ01/System/Public/DJ01GameplayTags.h"

// ============================================================
// 变量声明宏 - 放在类定义中 (AnimInstance, Widget, etc.)
// ============================================================
#define DJ01_BINDING_SET_TEST_VARS() \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Tags|Test") \
	bool bStunned = false; \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Tags|Test") \
	bool bRooted = false; \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Tags|Test") \
	bool bSilenced = false; \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Tags|Test") \
	bool bSlowed = false; \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Tags|Test") \
	bool bHasted = false; \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Attributes|Test") \
	float CurrentHealth = 0.0f; \
	UPROPERTY(BlueprintReadOnly, Category = "Bindings|Attributes|Test") \
	float CurrentMana = 0.0f;

// ============================================================
// 回调函数宏 - 放在类定义中
// ============================================================
#define DJ01_BINDING_SET_TEST_CALLBACKS() \
	void OnStunnedTagChanged(const FGameplayTag Tag, int32 NewCount) { bStunned = (NewCount > 0); } \
	void OnRootedTagChanged(const FGameplayTag Tag, int32 NewCount) { bRooted = (NewCount > 0); } \
	void OnSilencedTagChanged(const FGameplayTag Tag, int32 NewCount) { bSilenced = (NewCount > 0); } \
	void OnSlowedTagChanged(const FGameplayTag Tag, int32 NewCount) { bSlowed = (NewCount > 0); } \
	void OnHastedTagChanged(const FGameplayTag Tag, int32 NewCount) { bHasted = (NewCount > 0); } \
	void OnHealthChanged(const FOnAttributeChangeData& Data) { CurrentHealth = Data.NewValue.GetCurrentValue(); } \
	void OnManaChanged(const FOnAttributeChangeData& Data) { CurrentMana = Data.NewValue.GetCurrentValue(); }

// ============================================================
// 注册监听宏 - 在获得 ASC 引用后调用
// ============================================================
#define DJ01_BINDING_SET_TEST_REGISTER(ASC) \
	ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Stunned, EGameplayTagEventType::NewOrRemoved).AddUObject(this, &ThisClass::OnStunnedTagChanged); \
	ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Rooted, EGameplayTagEventType::NewOrRemoved).AddUObject(this, &ThisClass::OnRootedTagChanged); \
	ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Silenced, EGameplayTagEventType::NewOrRemoved).AddUObject(this, &ThisClass::OnSilencedTagChanged); \
	ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Slowed, EGameplayTagEventType::NewOrRemoved).AddUObject(this, &ThisClass::OnSlowedTagChanged); \
	ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Hasted, EGameplayTagEventType::NewOrRemoved).AddUObject(this, &ThisClass::OnHastedTagChanged); \
	ASC->GetGameplayAttributeValueChangeDelegate(UResourceSet::GetHealthAttribute()).AddUObject(this, &ThisClass::OnHealthChanged); \
	ASC->GetGameplayAttributeValueChangeDelegate(UResourceSet::GetManaAttribute()).AddUObject(this, &ThisClass::OnManaChanged);

// ============================================================
// 解除注册宏 - 在清理时调用
// ============================================================
#define DJ01_BINDING_SET_TEST_UNREGISTER(ASC) \
	if (ASC) { \
		ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Stunned, EGameplayTagEventType::NewOrRemoved).RemoveAll(this); \
		ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Rooted, EGameplayTagEventType::NewOrRemoved).RemoveAll(this); \
		ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Silenced, EGameplayTagEventType::NewOrRemoved).RemoveAll(this); \
		ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Slowed, EGameplayTagEventType::NewOrRemoved).RemoveAll(this); \
		ASC->RegisterGameplayTagEvent(DJ01GameplayTags::Status_Condition_Hasted, EGameplayTagEventType::NewOrRemoved).RemoveAll(this); \
		ASC->GetGameplayAttributeValueChangeDelegate(UResourceSet::GetHealthAttribute()).RemoveAll(this); \
		ASC->GetGameplayAttributeValueChangeDelegate(UResourceSet::GetManaAttribute()).RemoveAll(this); \
	}

// ============================================================
// 初始化值宏 - 在注册后调用以获取当前值
// ============================================================
#define DJ01_BINDING_SET_TEST_INIT_VALUES(ASC) \
	CurrentHealth = ASC->GetNumericAttribute(UResourceSet::GetHealthAttribute()); \
	CurrentMana = ASC->GetNumericAttribute(UResourceSet::GetManaAttribute()); \
	bStunned = ASC->HasMatchingGameplayTag(DJ01GameplayTags::Status_Condition_Stunned); \
	bRooted = ASC->HasMatchingGameplayTag(DJ01GameplayTags::Status_Condition_Rooted); \
	bSilenced = ASC->HasMatchingGameplayTag(DJ01GameplayTags::Status_Condition_Silenced); \
	bSlowed = ASC->HasMatchingGameplayTag(DJ01GameplayTags::Status_Condition_Slowed); \
	bHasted = ASC->HasMatchingGameplayTag(DJ01GameplayTags::Status_Condition_Hasted);
